
{% extends 'base.html' %}
  
{% block head %}
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
{% endblock head %}
    
{% block body %}

<div class="container my-3 border border-3 border border-white rounded-3 p-3 bg-dark bg-opacity-90 shadow">
  <form class= "form" action="/analyse-multiple" method="POST" enctype="multipart/form-data">

        <!-- <div class="mb-3">
          <div class="container my-1 border border-3 border border-white rounded-3 p-3 bg-dark bg-opacity-90 shadow"><h2  class="text-white ">CDR Smart Analyser</h2></div>

          <label for="selected" class="my-3 d-inline-flex ps-1 text-white" >Choose a Sample:</label>
          <select name="selected" id="cars" class = "mx-2" required>
            <option value="Sample1">Sample1</option>
            <option value="Sample2">Sample2</option>
            <option value="Sample3">Sample3</option>
            <option value="uploaded">Upload </option>
          </select> 

        </div> -->
            
      <div class="mb-3">
        <label for="file" class="form-label  text-white">Upload multiple xlsx: </label>
        <div class="mb-3 d-inline-flex ps-3"><input type="file" multiple= "true" autocomple = "off" accept=".xlsx" class="form-control" name="file" id="query" aria-describedby="emailHelp" value="False" ></div>
      </div>    

      <div class="mb-3">
        <label for="type" class="my-3 d-inline-flex ps-1 text-white" >Enter The Type Of Record:</label>
        <div class="mb-3 d-inline-flex ps-1"><input type="text" name = "type" class="form-control" ></div>
      </div>

      <div class="d-flex justify-content-start">
        <p class="mb-3 d-inline-flex ps-1 text-white">Enter Range Of Dates:</p>
        
      <div class="mb-3 ">
        <label for="min" class="form-label ps-2 text-white" > From: </label>
        <div class="mb-3 d-inline-flex ps-1"><input type="date" class="form-control" name="fromDate" id="#" /></div>
      </div>

      <div class="mb-3">
        <label for="max" class="form-label ps-2 text-white" > To: </label>
        <div class="mb-3 d-inline-flex ps-1"><input type="date" class="form-control" name="toDate" id="#" /></div>
      </div>
      </div>

      <!-- <div class="mb-3">
        <label for="date" class="form-label text-white" >Enter Date You Want To See Data Of:   </label>
        <div class="mb-3 d-inline-flex ps-2"><input type="date" class="form-control " name="date" id="query" aria-describedby="emailHelp"></div>
      </div> -->

      <div class="d-flex justify-content-start">
        <p class="mb-3 d-inline-flex ps-1 text-white">Enter Range Of Timestamps:</p>
        
      <div class="mb-3 ">
        <label for="min" class="form-label ps-2 text-white" > From: </label>
        <div class="mb-3 d-inline-flex ps-1"><input type="time" class="form-control" name="fromTime" id="#" /></div>
      </div>

      <div class="mb-3">
        <label for="max" class="form-label ps-2 text-white" > To: </label>
        <div class="mb-3 d-inline-flex ps-1"><input type="time" class="form-control" name="toTime" id="#" value="False"/></div>
      </div>
      </div>

      <div class="d-flex justify-content-start">
        <p class="mb-3 d-inline-flex ps-1 text-white">Enter range of contact duration you want to filter (sec):</p>

      <div class="mb-3 ">
        <label for="min" class="form-label ps-2 text-white" > Min: </label>
        <div class="mb-3 d-inline-flex ps-1"><input type="number" class="form-control" name="min" id="#" placeholder="50" /></div>
      </div>

      <div class="mb-3">
        <label for="max" class="form-label ps-2 text-white" > Max: </label>
        <div class="mb-3 d-inline-flex ps-1"><input type="number" class="form-control" name="max" id="#" value="False" placeholder="600"/></div>
      </div>
      </div>

      <div class="mb-3">
          <label for="number" class="form-label text-white" >Enter number you want to check details with: </label>
          <div class="mb-3 d-inline-flex ps-2"><input type="text" class="form-control"  name="number" maxlength = "10" id="type" placeholder="eg. 8103312242" /></div>
      </div>

      <div class="mb-3">
        <label for="IMEI" class="my-3 d-inline-flex ps-1 text-white" >Enter IMEI:</label>
        <div class="mb-3 d-inline-flex ps-1"><input type="text" name = "IMEI" class="form-control" ></div>
      </div>

      <div class="mb-3">
        <label for="IMSI" class="my-3 d-inline-flex ps-1 text-white" >Select IMSI:</label>
        <div class="mb-3 d-inline-flex ps-1"><input type="text" name = "IMSI" class="form-control" ></div>
      </div>
      
      <div class="d-flex justify-content-center"><button type="submit" class=" btn btn-primary px-3 "><b>Filter</b></button></div>>
  </form>
</div>

<div class="container my-3 bg-light rounded-3 pt-2 border border-dark" style="{{display}}">
<div class="mb-3 d-flex justify-content-start border-bottom">
  <div class="p-2 d-flex justify-content-start ">
    <!-- <button class="btn-outline-dark btn-lg mx-2" onclick="openCity(event, 'customfilter')" data-toggle="tooltip" data-placement="bottom" title="Filters data upon parameters given above">Custom Filtered</button> -->
    <!-- <button class="btn-outline-dark btn-lg mx-2" onclick="openCity(event, 'Frequency')" data-toggle="tooltip" data-placement="bottom" title="shows the people who has been most contacted with">Frequency</button> -->
    <button class="btn-outline-dark btn-lg mx-2" onclick="openCity(event, 'Common_IMEIs')" data-toggle="tooltip" data-placement="bottom" >Common IMEIs</button>
    <button class="btn-outline-dark btn-lg mx-2" onclick="openCity(event, 'Common_Numbers')" data-toggle="tooltip" data-placement="bottom" >Common Numbers</button>
    <button class="btn-outline-dark btn-lg mx-2" onclick="openCity(event, 'IMEI_CDR_List')" data-toggle="tooltip" data-placement="bottom" >IMEI</button>
    <button class="btn-outline-dark btn-lg mx-2" onclick="openCity(event, 'Numbers_CDR_List')" data-toggle="tooltip" data-placement="bottom" >IMEI</button>
    <!-- <button class="btn-outline-dark btn-lg mx-2" onclick="openCity(event, 'Location')" data-toggle="tooltip" data-placement="bottom" title="shows the location of contact" >Location</button> -->
    <!-- <button class="btn-outline-dark btn-lg mx-2" onclick="openCity(event, 'Call Duration')" data-toggle="tooltip" data-placement="bottom" title="shows the durations" >Duration</button> -->

  </div>
</div>


<div id="Common_IMEIs" class="tabcontent">
  <div class="container my-3 border border-3 border border-white rounded-3 p-3 bg-dark bg-opacity-90 shadow"><h3  class="text-white "><u>Common_IMEIs</u></h3></div>
  <div class= "container my-4 d-flex justify-content-center">
    <table class="table border border-3 border border-white rounded-3 p-3 bg-dark bg-opacity-90 shadow">
      <thead>
      <tr>
        <th scope="col" class="text-white">S No</th>
        <th scope="col" class="text-white">IMEI Number</th>
      </tr>
    </thead>
      {%for i in IMEIs_common_in_all%}
      <tr><th class="text-white" scope="row">{{loop.index}}</th></tr> 
      <tr><td class="text-white">  {{i}} </td></tr>
      {% endfor %}
    </table>
    </div>
</div>

<div id="Common_Numbers" class="tabcontent"> 
  <div class="container my-3 border border-3 border border-white rounded-3 p-3 bg-dark bg-opacity-90 shadow"><h3  class="text-white "><u>Common_IMEIs</u></h3></div>
  <div class= "container my-4 d-flex justify-content-center">
    <table class="table border border-3 border border-white rounded-3 p-3 bg-dark bg-opacity-90 shadow">
      <thead>
      <tr>
        <th scope="col" class="text-white">S No</th>
        <th scope="col" class="text-white">Phone Number</th>
      </tr>
    </thead>
      {%for i in numbers_common_in_all%}
      <th class="text-white" scope="row">{{loop.index}}</th> 
      <tr><td class="text-white">  {{i}} </td></tr>
      {% endfor %}
    </table>
    </div>
</div>

<div id="IMEI_CDR_List" class="tabcontent">
  <div class="container my-3 border border-3 border border-white rounded-3 p-3 bg-dark bg-opacity-90 shadow"><h3 class="text-white">Files Having IMEI</h3></div>  
  <div class= "container my-4 d-flex justify-content-center">
    <table class="table border border-3 border border-white rounded-3 p-3 bg-dark bg-opacity-90 shadow">
      <thead>
      <tr>
        <th scope="col" class="text-white">S No</th>
        <th scope="col" class="text-white">File Name</th>
      </tr>
    </thead>
      {% if filenames_with_IMEI!=None %}
      {% for i in filenames_with_IMEI%}
      <th class="text-white" scope="row">{{loop.index}}</th> 
      <tr><td class="text-white">  {{i}} </td></tr>
      {% endfor %}
      {%endif%}
    </table>
  </div>
</div>

<div id="Numbers_CDR_List" class="tabcontent">
  <div class="container my-3 border border-3 border border-white rounded-3 p-3 bg-dark bg-opacity-90 shadow"><h3 class="text-white">Files Having IMEI</h3></div>  
  <div class= "container my-4 d-flex justify-content-center">
    <table class="table border border-3 border border-white rounded-3 p-3 bg-dark bg-opacity-90 shadow">
      <thead>
      <tr>
        <th scope="col" class="text-white">S No</th>
        <th scope="col" class="text-white">File Name</th>
      </tr>
    </thead>
      {% for i in filenames_with_number %}
      <th class="text-white" scope="row">{{loop.index}}</th> 
      <tr><td class="text-white">  {{i}} </td></tr>
      {% endfor %}
    </table>
  </div>
</div>

</div>

<script>
function openCity(evt, idname) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("btn btn-primary");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(idname).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>
</div>



      

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
    -->
{% endblock body %}
<!-- <style>
  body {font-family: Arial;}
  
  /* Style the tab */
  .tab {
    overflow: hidden;
    border: 1px solid #ccc;
    background-color: #f1f1f1;
  }
  
  /* Style the buttons inside the tab */
  .tab button {
    background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
    font-size: 17px;
  }
  
  /* Change background color of buttons on hover */
  .tab button:hover {
    background-color: #ddd;
  }
  
  /* Create an active/current tablink class */
  .tab button.active {
    background-color: #ccc;
  }
  
  /* Style the tab content */
  .tabcontent {
    display: none;
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-top: none;
  } -->